/* ── Smooth scroll ── */
html {
  scroll-behavior: smooth;
}

/* Ticker marquee animation */
@keyframes marquee {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(-50%, 0, 0);
  }
}

.ticker {
  display: inline-block;
  animation: marquee 20s linear infinite;
}

/* Product image hover effect */
.product-image-container {
  position: relative;
  height: 700px;
  border-radius: 12px;
  background: var(--cream-200);
  display: flex;
  align-items: center;
  justify-content: center;
}

.product-image-wrapper {
  width: 80%;
  height: 80%;
  border-radius: 12px;
  background-color: var(--cream-100);
  box-shadow: 0 50px 100px -20px rgba(107, 93, 79, 0.1);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(-3deg);
  transition: transform 0.5s ease;
}

.product-image-wrapper:hover {
  transform: rotate(0deg) scale(1.02);
  transition: transform 0.3s ease;
}

.product-image-wrapper:hover img {
  filter: drop-shadow(0 15px 30px rgba(107, 93, 79, 0.2));
  transform: rotate(0deg) scale(1.15);
  transition: transform 0.3s ease, filter 0.3s ease;
}

.product-image-wrapper img {
  filter: drop-shadow(0 10px 20px rgba(107, 93, 79, 0.15));
  border-radius: 12px;
  transform: rotate(5deg) scale(1.1);
  transition: transform 0.3s ease, filter 0.3s ease;
}

/* Ingredient card grayscale to color */
.ingredient-image {
  width: 120px;
  height: 120px;
  margin: 0 auto 30px;
  border-radius: 50%;
  object-fit: cover;
  filter: grayscale(100%);
  transition: all 0.3s ease;
}

.ingredient-card:hover .ingredient-image {
  filter: grayscale(0%);
  transform: scale(1.1);
}

/* Subtle fade-in for sections on scroll */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.6s ease-out both;
}

/* Staggered entrance for grid children */
.stagger-in > *:nth-child(1) { animation-delay: 0ms; }
.stagger-in > *:nth-child(2) { animation-delay: 100ms; }
.stagger-in > *:nth-child(3) { animation-delay: 200ms; }
.stagger-in > *:nth-child(4) { animation-delay: 300ms; }

/* Organic drift animations — different axes and speeds */
@keyframes driftA {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(15px, -20px) scale(1.03); }
  50% { transform: translate(-10px, -35px) scale(0.97); }
  75% { transform: translate(20px, -10px) scale(1.02); }
}

@keyframes driftB {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(-20px, 10px) scale(0.96); }
  50% { transform: translate(15px, 25px) scale(1.04); }
  75% { transform: translate(-10px, -15px) scale(0.98); }
}

@keyframes driftC {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(25px, 15px) scale(1.05); }
  66% { transform: translate(-15px, -20px) scale(0.95); }
}

@keyframes driftD {
  0%, 100% { transform: translate(0, 0); }
  20% { transform: translate(-12px, -25px); }
  40% { transform: translate(18px, -8px); }
  60% { transform: translate(-8px, 20px); }
  80% { transform: translate(15px, 10px); }
}

/* Glow pulse animations — high floor so circles stay visible */
@keyframes glowPulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 0.9; }
}

@keyframes glowPulseSlow {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.8; }
}

@keyframes glowPulseFast {
  0%, 100% { opacity: 0.65; }
  50% { opacity: 0.95; }
}

.drift-a { animation: driftA var(--drift-speed, 12s) ease-in-out infinite, glowPulse var(--glow-speed, 8s) ease-in-out infinite; }
.drift-b { animation: driftB var(--drift-speed, 16s) ease-in-out infinite, glowPulseSlow var(--glow-speed, 10s) ease-in-out infinite; }
.drift-c { animation: driftC var(--drift-speed, 20s) ease-in-out infinite, glowPulseFast var(--glow-speed, 6s) ease-in-out infinite; }
.drift-d { animation: driftD var(--drift-speed, 14s) ease-in-out infinite, glowPulse var(--glow-speed, 12s) ease-in-out infinite; }

/* Slow rotation for ring accents */
@keyframes slowSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.deco-spin {
  animation: slowSpin 60s linear infinite;
}

/* ──────────────────────────────────────────────
   Scroll Reveal System
   All sections start hidden, reveal on scroll via
   [data-revealed="true"] set by useScrollReveal hook.
   ────────────────────────────────────────────── */

/* Custom ease-out-expo approximation */
:root {
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
}

/* ── Base reveal: fade + translateY(30px) ── */
.scroll-reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.7s var(--ease-out-expo), transform 0.7s var(--ease-out-expo);
  will-change: opacity, transform;
}

.scroll-reveal[data-revealed="true"] {
  opacity: 1;
  transform: translateY(0);
}

/* ── Directional reveals ── */
.scroll-reveal.reveal-left {
  transform: translateX(-40px);
}
.scroll-reveal.reveal-left[data-revealed="true"] {
  transform: translateX(0);
}

.scroll-reveal.reveal-right {
  transform: translateX(40px);
}
.scroll-reveal.reveal-right[data-revealed="true"] {
  transform: translateX(0);
}

/* ── Scale reveal ── */
.scroll-reveal.reveal-scale {
  transform: scale(0.95);
}
.scroll-reveal.reveal-scale[data-revealed="true"] {
  transform: scale(1);
}

/* ── Fade only ── */
.scroll-reveal.reveal-fade {
  transform: none;
  transition: opacity 0.9s var(--ease-out-expo);
}
.scroll-reveal.reveal-fade[data-revealed="true"] {
  opacity: 1;
}

/* ── Text reveal: clip-path wipe up ── */
.scroll-reveal.text-reveal {
  clip-path: inset(100% 0 0 0);
  transform: translateY(12px);
  transition: clip-path 0.8s var(--ease-out-expo), opacity 0.8s var(--ease-out-expo), transform 0.8s var(--ease-out-expo);
}
.scroll-reveal.text-reveal[data-revealed="true"] {
  clip-path: inset(0 0 0 0);
  opacity: 1;
  transform: translateY(0);
}

/* ── Row reveal: children slide from left, staggered ── */
.scroll-reveal.row-reveal > * {
  opacity: 0;
  transform: translateX(-20px);
  transition: opacity 0.5s var(--ease-out-expo), transform 0.5s var(--ease-out-expo);
  transition-delay: calc(var(--stagger-index, 0) * 100ms);
}
.scroll-reveal.row-reveal[data-revealed="true"] > * {
  opacity: 1;
  transform: translateX(0);
}

/* ── Stagger children: generic delay via CSS var ── */
.scroll-reveal[data-revealed="true"] > .stagger-child {
  transition-delay: calc(var(--stagger-index, 0) * 80ms);
}

/* Stagger children default state */
.scroll-reveal > .stagger-child {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s var(--ease-out-expo), transform 0.6s var(--ease-out-expo);
  transition-delay: calc(var(--stagger-index, 0) * 80ms);
}

.scroll-reveal[data-revealed="true"] > .stagger-child {
  opacity: 1;
  transform: translateY(0);
}

/* ── Hero entrance stagger ── */
.hero-entrance > * {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.7s var(--ease-out-expo), transform 0.7s var(--ease-out-expo);
}

.hero-entrance[data-entered="true"] > * {
  opacity: 1;
  transform: translateY(0);
}

.hero-entrance > *:nth-child(1) { transition-delay: 0ms; }
.hero-entrance > *:nth-child(2) { transition-delay: 120ms; }
.hero-entrance > *:nth-child(3) { transition-delay: 240ms; }
.hero-entrance > *:nth-child(4) { transition-delay: 360ms; }
.hero-entrance > *:nth-child(5) { transition-delay: 480ms; }

/* ── Hero image reveal ── */
.hero-image-reveal {
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.8s var(--ease-out-expo), transform 0.8s var(--ease-out-expo);
  transition-delay: 400ms;
}

.hero-image-reveal.entered {
  opacity: 1;
  transform: scale(1);
}

/* ── Section divider animations ── */

/* Diamond variant: lines scale outward, diamond pops */
.divider-animated .divider-line-left,
.divider-animated .divider-line-right {
  transform: scaleX(0);
  transition: transform 0.6s var(--ease-out-expo);
}
.divider-animated .divider-line-left {
  transform-origin: right center;
}
.divider-animated .divider-line-right {
  transform-origin: left center;
}
.divider-animated .divider-diamond {
  transform: rotate(45deg) scale(0);
  transition: transform 0.5s var(--ease-out-expo);
  transition-delay: 0.2s;
}

.divider-animated[data-revealed="true"] .divider-line-left,
.divider-animated[data-revealed="true"] .divider-line-right {
  transform: scaleX(1);
}
.divider-animated[data-revealed="true"] .divider-diamond {
  transform: rotate(45deg) scale(1);
}

/* Dots variant: sequential scale-in */
.divider-animated .divider-dot {
  transform: scale(0);
  transition: transform 0.4s var(--ease-out-expo);
}
.divider-animated .divider-dot:nth-child(1) { transition-delay: 0ms; }
.divider-animated .divider-dot:nth-child(2) { transition-delay: 150ms; }
.divider-animated .divider-dot:nth-child(3) { transition-delay: 300ms; }

.divider-animated[data-revealed="true"] .divider-dot {
  transform: scale(1);
}

/* ── Stat counter glow pulse ── */
@keyframes statGlow {
  0%, 100% { text-shadow: 0 0 0px transparent; }
  50% { text-shadow: 0 0 20px rgba(248, 246, 242, 0.3); }
}

.stat-glow {
  animation: statGlow 2s ease-in-out 1;
  animation-delay: 2s;
}

/* ── Ingredient card radial glow on hover ── */
.ingredient-card {
  position: relative;
  overflow: visible;
}

.ingredient-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(181,164,144,0.15) 0%, transparent 70%);
  opacity: 0;
  transform: scale(0.5);
  transition: opacity 0.4s ease, transform 0.4s ease;
  pointer-events: none;
  z-index: 0;
}

.ingredient-card:hover::before {
  opacity: 1;
  transform: scale(1.2);
}

.ingredient-card > * {
  position: relative;
  z-index: 1;
}

/* ── Context Card — fixed detail panel ── */
.context-card {
  transform: translateY(calc(100% + 24px));
  opacity: 0;
  transition: transform 0.4s var(--ease-out-expo), opacity 0.3s ease;
  pointer-events: none;
}
.context-card.is-open {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
}
.context-card-body {
  display: grid;
  grid-template-rows: 1fr;
  transition: grid-template-rows 0.35s var(--ease-out-expo);
}
.context-card-body.is-collapsed {
  grid-template-rows: 0fr;
}
.context-card-body > div {
  overflow: hidden;
}

/* Corner frame overrides for context card */
.context-card.corner-frame::before {
  border-top-color: var(--cream-500);
  border-left-color: var(--cream-500);
}
.context-card.corner-frame::after {
  border-bottom-color: var(--cream-500);
  border-right-color: var(--cream-500);
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .context-card {
    left: 1rem !important;
    right: 1rem !important;
    bottom: 1rem !important;
    width: auto !important;
  }

  .product-image-container {
    height: 400px;
    margin-top: 40px;
  }

  .deco-ring,
  .deco-dots,
  .deco-numeral,
  .deco-glow,
  .drift-a,
  .drift-b,
  .drift-c,
  .drift-d {
    display: none;
  }
}

/* ── Reduced Motion ── */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    transition-delay: 0ms !important;
  }

  html {
    scroll-behavior: auto;
  }

  .scroll-reveal,
  .scroll-reveal.reveal-left,
  .scroll-reveal.reveal-right,
  .scroll-reveal.reveal-scale,
  .scroll-reveal.reveal-fade,
  .scroll-reveal.text-reveal {
    opacity: 1;
    transform: none;
    clip-path: none;
  }

  .scroll-reveal > .stagger-child,
  .scroll-reveal.row-reveal > * {
    opacity: 1;
    transform: none;
  }

  .hero-entrance > * {
    opacity: 1;
    transform: none;
  }

  .hero-image-reveal {
    opacity: 1;
    transform: none;
  }

  .divider-animated .divider-line-left,
  .divider-animated .divider-line-right {
    transform: scaleX(1);
  }

  .divider-animated .divider-diamond {
    transform: rotate(45deg) scale(1);
  }

  .divider-animated .divider-dot {
    transform: scale(1);
  }

  .context-card {
    transform: none;
    opacity: 0;
  }
  .context-card.is-open {
    opacity: 1;
  }
}
